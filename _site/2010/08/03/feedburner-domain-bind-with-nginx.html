<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="Linghua Zhang" />
    <title>nginx proxy实现feedburner域名绑定</title>
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="/atom.xml" rel="alternate" title="setImpl" type="application/atom+xml" />
    <link rel="stylesheet" href="/media/css/style.css">
    <link rel="stylesheet" href="/media/css/github.css">
    <script type="text/javascript" src="/media/js/highlight.pack.js"></script>
    <script type="text/javascript">
      hljs.initHighlightingOnLoad();
      </script>
    </head>
    <body>
      <div id="container">
        <div id="main" role="main">
          <header>
          <h1>nginx proxy实现feedburner域名绑定</h1>
          </header>
          <nav>
          <span><a title="home page" class="" href="/">home</a></span>
          <span><a title="tags" class="" href="/tags.html">tags</a></span>
          <span><a title="about" class="" href="/about.html">about me</a></span>
          <span><a title="my photos" class="" href="http://www.flickr.com/photos/lhzhang">gallery</a></span>
          <span><a title="blogroll" class="" href="/links.html">links</a></span>
          <span><a title="subscribe me" class="" href="/atom.xml">feed</a></span>
          </nav>
          <article class="content">
          <section class="post">
<p>好吧feedsky又一次挂掉了，忍无可忍之下换回feedburner。</p>

<p>其实最早是用fb的，不过有两个最大的问题让我转去了feedsky。其一是域名绑定，feedburner的域名绑定很鸡肋，因为是绑定在yourdomain.com/feedname这样子的url下，反正url都一样难看我何苦还要绑定？第二个不用fb的原因就是墙了。</p>

<p>以前觉得这两个问题很严重，回头想想其实利用nginx的proxy module其实是很容易解决的。把子域名指向主机（例：feed.gopherwood.info），配置nginx如下：</p>

<pre><code>server {
  listen       80;
  server_name  feed.gopherwood.info;
  charset utf-8;
  access_log   /var/log/nginx/gopherwood.access.log  main;
  error_page   500 502 503 504  /50x.html;

  location / {
    proxy_set_header         Host             feeds.feedburner.com;
    proxy_set_header         X-Real-IP        $remote_addr;
    proxy_set_header         X-Forwarded-For  $proxy_add_x_forwarded_for;

    # 这里的/gopherwood是feedburner的feed name
    rewrite                  ^(.*)$           /gopherwood$1 break;

    proxy_max_temp_file_size 0;
    proxy_pass               http://feeds.feedburner.com;
  }
}
</code></pre>

<p>PS：其实之前折腾blog的时候也考虑过把文章托管在blogger，文字以外的资源托管在vps或者amazon或者其他什么的云存储上，通过blogger的missing file host来处理，然后利用nginx的proxy来搞定墙的问题。等blogger支持自定义slug了就换去玩儿玩儿。</p>

</section>
<section class="meta">

<span class="tags">
  tagged by 
  
  <a href="/tags.html#feedsky" title="feedsky">feedsky</a>&nbsp;
  
  <a href="/tags.html#feedburner" title="feedburner">feedburner</a>&nbsp;
  
  <a href="/tags.html#nginx" title="nginx">nginx</a>&nbsp;
  
</span>

<span class="time">
  <time datetime="2010-08-03">2010-08-03</time>
</span>
</section>

<section class="comment">
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'gopherwood'; // required: replace example with your forum shortname
	var disqus_identifier = 'urn:uuid:3fe3d657-91cb-4269-904d-4a81839167c5';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>


          </article>
        </div>
      </div> <!--! end of #container -->
    </body>
  </html>
